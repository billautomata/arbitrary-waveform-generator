(this["webpackJsonparbitrary-waveform-generator"]=this["webpackJsonparbitrary-waveform-generator"]||[]).push([[0],{108:function(e,t,a){},109:function(e,t,a){},112:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),i=a(26),o=a.n(i),s=(a(108),a(27)),u=a(28),l=a(29),c=a(33),f=(a(109),a(4)),h=a(1),v=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).state={},n.svgRef=r.a.createRef();var i=f.b().domain([0,16]).range([0,2*Math.PI]);return n.values=f.a(16).map((function(e){return 50*Math.sin(i(e))+50})),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){console.log("mounted");this.arrayBuffer=this.doAudio()}},{key:"triggerBufferUpdate",value:function(){for(var e=0,t=0,a=f.b().domain([0,100]).range([1,-1]),n=f.b().domain([0,24]).range([this.values[t],this.values[(t+1)%this.values.length]]),r=0;r<this.arrayBuffer.numberOfChannels;r++)for(var i=this.arrayBuffer.getChannelData(r),o=0;o<this.arrayBuffer.length;o++)i[o]=a(n(e)),++e>24&&(e=0,t+=1,t%=this.values.length,n=f.b().domain([0,24]).range([this.values[t],this.values[(t+1)%this.values.length]]))}},{key:"doAudio",value:function(){var e=new(window.AudioContext||window.webkitAudioContext);e.resume(),console.log(e);var t=e.createAnalyser();t.smoothingTimeConstant=.85;var a=e.createGain();console.log(e.state);var n=e.createBuffer(2,3*e.sampleRate,e.sampleRate);this.arrayBuffer=n,this.triggerBufferUpdate();var r=e.createBufferSource();r.buffer=n,r.connect(t),a.gain.value=.25,r.connect(a),a.connect(e.destination),r.loop=!0,r.start();var i=document.querySelector(".visualiser"),o=i.getContext("2d"),s=i.width,u=i.height;t.fftSize=1024;var l=t.fftSize;console.log(l);var c=new Uint8Array(l);o.clearRect(0,0,s,u);return function e(){requestAnimationFrame(e);t.getByteTimeDomainData(c),o.fillStyle="rgb(200, 200, 200)",o.fillRect(0,0,s,u),o.lineWidth=2,o.strokeStyle="rgb(0, 0, 0)",o.beginPath();for(var a=1*s/l,n=0,r=0;r<l;r++){var f=c[r]/128*u/2;0===r?o.moveTo(n,f):o.lineTo(n,f),n+=a}o.lineTo(i.width,i.height/2),o.stroke()}(),n}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{children:[Object(h.jsx)("canvas",{className:"visualiser",width:"1024",height:"256"}),Object(h.jsx)("div",{style:{position:"relative"},children:f.a(16).map((function(t){return Object(h.jsx)("input",{type:"range",defaultValue:e.values[t],style:{transform:"rotateZ(270deg)",width:"200px",position:"absolute",top:100,left:20*t},onChange:function(a){console.log(e.values),console.log(a.target.value),e.values[t]=Number(a.target.value),e.triggerBufferUpdate()}})}))})]})}}]),a}(r.a.Component),g=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,113)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),i(e),o(e)}))};o.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(v,{})}),document.getElementById("root")),g()}},[[112,1,2]]]);
//# sourceMappingURL=main.2b6c1396.chunk.js.map