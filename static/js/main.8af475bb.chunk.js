(this["webpackJsonparbitrary-waveform-generator"]=this["webpackJsonparbitrary-waveform-generator"]||[]).push([[0],{109:function(e,t,n){},110:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),i=n(27),o=n.n(i),s=(n(109),n(28)),u=n(29),l=n(6),c=n(30),d=n(34),f=(n(110),n(4)),h=n(1),g=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(s.a)(this,n),(a=t.call(this,e)).state={},a.svgRef=r.a.createRef();var i=f.b().domain([0,16]).range([0,2*Math.PI]);return a.values=f.a(16).map((function(e){return 50*Math.sin(i(e))+50})),a.handleChange=a.handleChange.bind(Object(l.a)(a)),a.triggerBufferUpdate=a.triggerBufferUpdate.bind(Object(l.a)(a)),a.doAudio=a.doAudio.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){this.values[Number(e.nativeEvent.srcElement.id)]=Number(e.target.value),this.triggerBufferUpdate()}},{key:"componentDidMount",value:function(){console.log("mounted");document.querySelector("canvas").addEventListener("click",this.doAudio)}},{key:"triggerBufferUpdate",value:function(){for(var e=0,t=0,n=f.b().domain([0,100]).range([1,-1]),a=f.b().domain([0,24]).range([this.values[t],this.values[(t+1)%this.values.length]]),r=0;r<this.arrayBuffer.numberOfChannels;r++)for(var i=this.arrayBuffer.getChannelData(r),o=0;o<this.arrayBuffer.length;o++)i[o]=n(a(e)),++e>24&&(e=0,t+=1,t%=this.values.length,a=f.b().domain([0,24]).range([this.values[t],this.values[(t+1)%this.values.length]]))}},{key:"doAudio",value:function(){var e=new(window.AudioContext||window.webkitAudioContext);e.resume(),console.log(e);var t=e.createAnalyser();t.smoothingTimeConstant=.85;var n=e.createGain();console.log(e.state);var a=e.createBuffer(2,3*e.sampleRate,e.sampleRate);this.arrayBuffer=a,this.triggerBufferUpdate();var r=e.createBufferSource();r.buffer=a,r.connect(t),n.gain.value=.25,r.connect(n),n.connect(e.destination),r.loop=!0,r.start();var i=document.querySelector(".visualiser"),o=i.getContext("2d"),s=i.width,u=i.height;t.fftSize=1024;var l=t.fftSize;console.log(l);var c=new Uint8Array(l);o.clearRect(0,0,s,u);return function e(){requestAnimationFrame(e);t.getByteTimeDomainData(c),o.fillStyle="rgb(200, 200, 200)",o.fillRect(0,0,s,u),o.lineWidth=2,o.strokeStyle="rgb(0, 0, 0)",o.beginPath();for(var n=1*s/l,a=0,r=0;r<l;r++){var d=c[r]/128*u/2;0===r?o.moveTo(a,d):o.lineTo(a,d),a+=n}o.lineTo(i.width,i.height/2),o.stroke()}(),a}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{style:{padding:"10px"},children:[Object(h.jsx)("canvas",{className:"visualiser",width:"1024",height:"256",style:{outline:"1px solid black"}}),Object(h.jsx)("div",{style:{position:"relative"},children:f.a(16).map((function(t){return Object(h.jsx)("input",{type:"range",id:t,defaultValue:e.values[t],style:{transform:"rotateZ(270deg)",width:"200px",position:"absolute",top:100,left:20*t},onInput:e.handleChange},"ok"+t)}))})]})}}]),n}(r.a.Component),v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,114)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)}))};o.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(g,{})}),document.getElementById("root")),v()}},[[113,1,2]]]);
//# sourceMappingURL=main.8af475bb.chunk.js.map